<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Network | OSv Blog]]></title>
  <link href="http://osv-io.github.io//github/blog/categories/network/atom.xml" rel="self"/>
  <link href="http://osv-io.github.io//github/"/>
  <updated>2019-04-20T01:01:48-04:00</updated>
  <id>http://osv-io.github.io//github/</id>
  <author>
    <name><![CDATA[Cloudius Systems]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Bridged Networking With Capstan]]></title>
    <link href="http://osv-io.github.io//github/blog/2014/05/07/capstan-bridge/"/>
    <updated>2014-05-07T11:37:05-04:00</updated>
    <id>http://osv-io.github.io//github/blog/2014/05/07/capstan-bridge</id>
    <content type="html"><![CDATA[<p><strong>By Don Marti</strong></p>

<p>New versions of <a href="https://github.com/cloudius-systems/capstan">Capstan</a> are making it simpler to run OSv virtual machines in a production configuration, by adding more control of network options.  A useful new feature, which helps deal with the <a href="https://github.com/cloudius-systems/osv/wiki/Running-OSv-image-under-KVM-QEMU">details of bringing up networking</a>, is the <code class="highlighter-rouge">-n</code> option.</p>

<p>By default, Capstan starts up KVM/QEMU with user networking:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> -netdev user,id=un0,net=192.168.122.0/24,host=192.168.122.1
</code></pre></div></div>

<p>(That’s from <code class="highlighter-rouge">ps ax | grep qemu</code>, which you can run
to see the qemu-system-x86_64 command that Capstan
is executing for you.)</p>

<p>But there are many more <a href="http://www.linux-kvm.org/page/Networking">networking options</a> for QEMU/KVM.  The basic user networking, which does not require root access to start up, is good for development and simple tasks.  But for production use, where you need to get your VM on a network where it’s available from other VMs or from the outside, you’ll need bridged networking.  (See your Linux distribution or hypervisor documentation for the details of creating a virtual or public bridge device.)</p>

<p>If you invoke <code class="highlighter-rouge">capstan run</code> with the <code class="highlighter-rouge">-n bridge</code> option, you’ll get QEMU running with:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-netdev bridge,id=hn0,br=virbr0,helper=/usr/libexec/qemu-bridge-helper
</code></pre></div></div>

<p>If you have a specific bridge device to connect to, you can use the <code class="highlighter-rouge">-b</code> option with the name of the bridge device.  The default is <code class="highlighter-rouge">virbr0</code>, but you can also set up a public bridge, usually <code class="highlighter-rouge">br0</code>, that’s bridged to a physical network interface on the host.</p>

<h1 id="other-hypervisors">Other hypervisors</h1>

<p>Don’t feel left out if you have a different hypervisor.  Capstan also handles bridged networking on VirtualBox, with the rest of the supported hypervisors coming soon.   The fact that the syntax is the same is going to be a big time-saver for those of us who have to do testing and demos on multiple systems—no more dealing with arcane commands that are different from system to system.</p>

<p>For more on Capstan and networking, please join the <a href="https://groups.google.com/forum/#!forum/osv-dev">osv-dev mailing list on Google Groups</a>.  You can get updates by subscribing to this blog’s feed, or folllowing <a href="https://twitter.com/CloudiusSystems">@CloudiusSystems</a> on Twitter.</p>

]]></content>
  </entry>
  
</feed>
